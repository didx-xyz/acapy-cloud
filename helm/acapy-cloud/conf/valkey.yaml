# https://github.com/bitnami/charts/tree/main/bitnami/valkey

global:
  security:
    # Required to override image repositories (`bitnami` -> `bitnamilegacy`)
    # https://github.com/bitnami/charts/issues/35164
    # https://github.com/bitnami/containers/issues/84600
    allowInsecureImages: true

fullnameOverride: valkey
architecture: replication
image:
  repository: bitnamilegacy/valkey
auth:
  enabled: false
primary:
  replicaCount: 1
  resourcesPreset: nano
  persistence:
    enabled: false
    size: 1Gi
  persistentVolumeClaimRetentionPolicy:
    enabled: true
    whenDeleted: Delete
  podLabels:
    sidecar.istio.io/inject: "false"
  pdb:
    create: false
replica:
  replicaCount: 0
  resourcesPreset: nano
  persistence:
    enabled: false
    size: 1Gi
  persistentVolumeClaimRetentionPolicy:
    enabled: true
    whenDeleted: Delete
  podLabels:
    sidecar.istio.io/inject: "false"
  podManagementPolicy: Parallel
  pdb:
    create: false
sentinel:
  image:
    repository: bitnamilegacy/valkey-sentinel
metrics:
  image:
    repository: bitnamilegacy/valkey-exporter
volumePermissions:
  image:
    repository: bitnamilegacy/os-shell
kubectl:
  image:
    repository: bitnamilegacy/kubectl
