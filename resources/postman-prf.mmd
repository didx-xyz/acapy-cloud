```mermaid
graph TD
    %% Define styles for different actors
    classDef tenantAdmin fill:#ff9999,stroke:#333,stroke-width:2px;
    classDef governance fill:#99ff99,stroke:#333,stroke-width:2px;
    classDef issuerTenant fill:#9999ff,stroke:#333,stroke-width:2px;
    classDef holderTenant fill:#ffff99,stroke:#333,stroke-width:2px;

    %% Start and End
    A[Start]
    AG[End]

    %% Tenant Admin actions
    B[Get issuer tenant]:::tenantAdmin
    C[Get issuer access token]:::tenantAdmin
    D[Create issuer/verifier]:::tenantAdmin
    F[Get holder tenant]:::tenantAdmin
    G[Get holder access token]:::tenantAdmin
    H[Create holder]:::tenantAdmin
    AE[Delete issuer/verifier]:::tenantAdmin
    AF[Delete holder]:::tenantAdmin

    %% Governance actions
    E[Verify issuer/verifier on trust-registry]:::governance
    L[Get Schema]:::governance
    M[Create Schema]:::governance
    N[Verify schema on trust-registry]:::governance

    %% Issuer Tenant actions
    I[Create invitation]:::issuerTenant
    O[Get Cred Def]:::issuerTenant
    P[Create Cred Def]:::issuerTenant
    Q[Create Credential]:::issuerTenant
    U[List credentials]:::issuerTenant
    V[Send Proof Request]:::issuerTenant
    AB[Get Proof]:::issuerTenant
    AC[Revoke Credential]:::issuerTenant
    AD[Check Revoked]:::issuerTenant

    %% Holder Tenant actions
    J[Accept invitation]:::holderTenant
    R[Wait for SSE offer-received]:::holderTenant
    S[Get Credentials ID]:::holderTenant
    T[Accept Credential]:::holderTenant
    W[Wait for SSE request-received]:::holderTenant
    X[Get Proof ID]:::holderTenant
    Y[Get Referent]:::holderTenant
    Z[Accept Proof Request]:::holderTenant

    %% Shared or system actions
    K[Wait for SSE connection-ready]
    AA[Wait for SSE proof done]

    %% Flow
    A --> B
    B -->|Issuer exists| C
    B -->|Issuer doesn't exist| D --> E --> C
    C --> F
    F -->|Holder exists| G
    F -->|Holder doesn't exist| H --> G
    G --> I --> J --> K --> L
    L -->|Schema exists| N
    L -->|Schema doesn't exist| M --> N
    N --> O
    O -->|Cred Def exists| Q
    O -->|Cred Def doesn't exist| P --> Q
    Q --> R --> S --> T --> U
    U --> V --> W --> X --> Y --> Z --> AA --> AB
    AB --> AC --> AD --> V
    V --> W
    AA --> AH{Is credential revoked?}
    AH -->|Yes| AI{delete_issuer_tenant = true?}
    AH -->|No| V
    AI -->|Yes| AE
    AI -->|No| AG
    AE --> AF --> AG

    %% Legend
    subgraph Legend
        TA[Tenant Admin]:::tenantAdmin
        GOV[Governance]:::governance
        IT[Issuer Tenant]:::issuerTenant
        HT[Holder Tenant]:::holderTenant
    end
```
